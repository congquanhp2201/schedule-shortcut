# Thá»i KhÃ³a Biá»ƒu Shortcut for iPhone
# Import this file to Shortcuts app

name: "Thá»i KhÃ³a Biá»ƒu VL64A-QTKD & LT64A-QTKD"
icon: "book.fill"
color: "blue"

actions:
  - type: "text"
    uuid: "data-source"
    text: |
      {
        "courses": [
          {
            "code": "PPH108",
            "name": "PhÃ¡t triá»ƒn ká»¹ nÄƒng vÃ  Ä‘á»‹nh hÆ°á»›ng NN cho nhÃ  QT",
            "day": 2,
            "startTime": "07:00",
            "endTime": "09:30",
            "room": "A401",
            "department": "K.QTKD",
            "startDate": "2025-09-23",
            "endDate": "2025-10-30"
          },
          {
            "code": "KET201", 
            "name": "NguyÃªn lÃ½ káº¿ toÃ¡n",
            "day": 3,
            "startTime": "13:00",
            "endTime": "15:30", 
            "room": "A405",
            "department": "",
            "startDate": "2025-09-24",
            "endDate": "2025-10-20"
          },
          {
            "code": "EBA111",
            "name": "Tiáº¿ng anh há»c thuáº­t vÃ  TM 1", 
            "day": 5,
            "startTime": "09:30",
            "endTime": "12:00",
            "room": "B402",
            "department": "",
            "startDate": "2025-10-22",
            "endDate": "2025-12-09"
          },
          {
            "code": "DTI100",
            "name": "TÆ° duy thiáº¿t káº¿ vÃ  Ä‘á»•i má»›i sÃ¡ng táº¡o",
            "day": 6, 
            "startTime": "15:30",
            "endTime": "18:00",
            "room": "A405",
            "department": "",
            "startDate": "2025-04-11",
            "endDate": "2025-11-12"
          },
          {
            "code": "MKT301",
            "name": "Marketing cÄƒn báº£n",
            "day": 7,
            "startTime": "07:00", 
            "endTime": "09:30",
            "room": "A305",
            "department": "",
            "startDate": "2025-11-12",
            "endDate": "2026-01-17"
          }
        ]
      }

  - type: "getValueForKey"
    uuid: "get-courses"
    key: "courses"
    input: "data-source"

  - type: "date"
    uuid: "current-date"

  - type: "formatDate"
    uuid: "day-of-week"
    format: "custom"
    customFormat: "u"
    input: "current-date"

  - type: "chooseFromMenu"
    uuid: "main-menu"
    prompt: "Chá»n chá»©c nÄƒng:"
    items:
      - "ğŸ“… HÃ´m nay"
      - "ğŸ“† Tuáº§n nÃ y" 
      - "ğŸ“‹ Táº¥t cáº£ mÃ´n"
      - "ğŸ”” CÃ i thÃ´ng bÃ¡o"
      - "ğŸ“Š Widget"

  # TODAY'S SCHEDULE
  - type: "conditional"
    uuid: "today-condition"
    condition: "equals"
    value: "ğŸ“… HÃ´m nay"
    input: "main-menu"
    
    ifTrue:
      - type: "filterItems"
        uuid: "today-filter"
        property: "day"
        condition: "equals"
        value: "day-of-week"
        input: "get-courses"
        
      - type: "repeatWithEach"
        uuid: "format-today"
        input: "today-filter"
        actions:
          - type: "text"
            text: |
              ğŸ“š {{courseCode}} - {{courseName}}
              â° {{startTime}} - {{endTime}}
              ğŸ« PhÃ²ng: {{room}}
              ğŸ“ {{department}}
              
      - type: "showNotification"
        title: "Thá»i khÃ³a biá»ƒu hÃ´m nay"
        body: "format-today"

  # WEEK'S SCHEDULE  
  - type: "conditional"
    uuid: "week-condition"
    condition: "equals"
    value: "ğŸ“† Tuáº§n nÃ y"
    input: "main-menu"
    
    ifTrue:
      - type: "text"
        uuid: "week-schedule"
        text: |
          ğŸ“… THá»œI KHÃ“A BIá»‚U TUáº¦N NÃ€Y
          
          Thá»© 2: PPH108 (07:00-09:30) - A401
          ğŸ“š PhÃ¡t triá»ƒn ká»¹ nÄƒng vÃ  Ä‘á»‹nh hÆ°á»›ng NN cho nhÃ  QT
          
          Thá»© 3: KET201 (13:00-15:30) - A405  
          ğŸ“š NguyÃªn lÃ½ káº¿ toÃ¡n
          
          Thá»© 5: EBA111 (09:30-12:00) - B402
          ğŸ“š Tiáº¿ng anh há»c thuáº­t vÃ  TM 1
          
          Thá»© 6: DTI100 (15:30-18:00) - A405
          ğŸ“š TÆ° duy thiáº¿t káº¿ vÃ  Ä‘á»•i má»›i sÃ¡ng táº¡o
          
          Thá»© 7: MKT301 (07:00-09:30) - A305
          ğŸ“š Marketing cÄƒn báº£n
          
      - type: "showNotification"
        title: "Lá»‹ch há»c tuáº§n nÃ y"
        body: "week-schedule"
        
      - type: "copyToClipboard"
        input: "week-schedule"

  # SET NOTIFICATIONS
  - type: "conditional"
    uuid: "notification-condition" 
    condition: "equals"
    value: "ğŸ”” CÃ i thÃ´ng bÃ¡o"
    input: "main-menu"
    
    ifTrue:
      - type: "repeatWithEach"
        uuid: "create-reminders"
        input: "get-courses"
        actions:
          - type: "addToCalendar"
            title: "ğŸ“š {{code}} - {{name}}"
            startDate: "{{startDate}} {{startTime}}"
            endDate: "{{startDate}} {{endTime}}"
            location: "{{room}}"
            notes: "Khoa: {{department}}"
            alert: "30 minutes"
            
      - type: "showNotification"
        title: "ThÃ nh cÃ´ng!"
        body: "ÄÃ£ thÃªm táº¥t cáº£ lá»‹ch há»c vÃ o Calendar vá»›i thÃ´ng bÃ¡o 30 phÃºt trÆ°á»›c"

automation:
  - trigger: "time"
    time: "06:30"
    days: ["monday", "tuesday", "wednesday", "thursday", "friday", "saturday", "sunday"]
    action: "run-shortcut"
    shortcut: "Thá»i KhÃ³a Biá»ƒu VL64A-QTKD & LT64A-QTKD"

widget:
  size: "medium"
  template: |
    ğŸ“š HÃ”M NAY
    {{todaySchedule}}
    
    â° TIáº¾P THEO  
    {{nextClass}}
